{"remainingRequest":"/site/node_modules/docz-core/node_modules/thread-loader/dist/cjs.js??ref--5-1!/site/node_modules/docz-core/node_modules/babel-loader/lib/index.js??ref--5-2!/site/node_modules/source-map-loader/index.js!/site/src/components/forms/selects/with-async.jsx","dependencies":[{"path":"/site/src/components/forms/selects/with-async.jsx","mtime":1573330613000},{"path":"/site/node_modules/docz-core/node_modules/cache-loader/dist/cjs.js","mtime":1573331449000},{"path":"/site/node_modules/docz-core/node_modules/thread-loader/dist/cjs.js","mtime":1573331450000},{"path":"/site/node_modules/docz-core/node_modules/babel-loader/lib/index.js","mtime":1573331449000},{"path":"/site/node_modules/source-map-loader/index.js","mtime":1573331450000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9leHRlbmRzIGZyb20gIi9zaXRlL25vZGVfbW9kdWxlcy9iYWJlbC1wcmVzZXQtcmVhY3QtYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzIjsKaW1wb3J0IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyBmcm9tICIvc2l0ZS9ub2RlX21vZHVsZXMvYmFiZWwtcHJlc2V0LXJlYWN0LWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0V2l0aG91dFByb3BlcnRpZXMiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIi9zaXRlL25vZGVfbW9kdWxlcy9iYWJlbC1wcmVzZXQtcmVhY3QtYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL3NpdGUvbm9kZV9tb2R1bGVzL2JhYmVsLXByZXNldC1yZWFjdC1hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIGZyb20gIi9zaXRlL25vZGVfbW9kdWxlcy9iYWJlbC1wcmVzZXQtcmVhY3QtYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIjsKaW1wb3J0IF9nZXRQcm90b3R5cGVPZiBmcm9tICIvc2l0ZS9ub2RlX21vZHVsZXMvYmFiZWwtcHJlc2V0LXJlYWN0LWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZ2V0UHJvdG90eXBlT2YiOwppbXBvcnQgX2Fzc2VydFRoaXNJbml0aWFsaXplZCBmcm9tICIvc2l0ZS9ub2RlX21vZHVsZXMvYmFiZWwtcHJlc2V0LXJlYWN0LWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXNzZXJ0VGhpc0luaXRpYWxpemVkIjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICIvc2l0ZS9ub2RlX21vZHVsZXMvYmFiZWwtcHJlc2V0LXJlYWN0LWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHMiOwp2YXIgX2pzeEZpbGVOYW1lID0gIi9zaXRlL3NyYy9jb21wb25lbnRzL2Zvcm1zL3NlbGVjdHMvd2l0aC1hc3luYy5qc3giOwoKKGZ1bmN0aW9uICgpIHsKICB2YXIgZW50ZXJNb2R1bGUgPSAodHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IHJlYWN0SG90TG9hZGVyR2xvYmFsIDogcmVxdWlyZSgncmVhY3QtaG90LWxvYWRlcicpKS5lbnRlck1vZHVsZTsKICBlbnRlck1vZHVsZSAmJiBlbnRlck1vZHVsZShtb2R1bGUpOwp9KSgpOwoKdmFyIF9fc2lnbmF0dXJlX18gPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWxbImRlZmF1bHQiXS5zaWduYXR1cmUgOiBmdW5jdGlvbiAoYSkgewogIHJldHVybiBhOwp9OwoKaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JzsKCmZ1bmN0aW9uIHdpdGhBc3luYyhDb21wb25lbnQpIHsKICB2YXIgQXN5bmMgPQogIC8qI19fUFVSRV9fKi8KICBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkgewogICAgX2luaGVyaXRzKEFzeW5jLCBfUmVhY3QkQ29tcG9uZW50KTsKCiAgICBmdW5jdGlvbiBBc3luYyhwcm9wcykgewogICAgICB2YXIgX3RoaXM7CgogICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQXN5bmMpOwoKICAgICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoQXN5bmMpLmNhbGwodGhpcywgcHJvcHMpKTsKICAgICAgX3RoaXMuc3RhdGUgPSB7CiAgICAgICAgdmFsdWU6IHByb3BzLnZhbHVlLAogICAgICAgIHRleHQ6ICcnLAogICAgICAgIG9wdGlvbnM6IFtdLAogICAgICAgIHRlcm06ICcnCiAgICAgIH07CiAgICAgIF90aGlzLmZpbHRlck9wdGlvbnMgPSBfdGhpcy5maWx0ZXJPcHRpb25zLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpOwogICAgICBfdGhpcy5maWx0ZXJSZWYgPSBSZWFjdC5jcmVhdGVSZWYoKTsKCiAgICAgIF90aGlzLmZpbHRlck9wdGlvbnMoKTsKCiAgICAgIHJldHVybiBfdGhpczsKICAgIH0KCiAgICBfY3JlYXRlQ2xhc3MoQXN5bmMsIFt7CiAgICAgIGtleTogImZpbHRlck9wdGlvbnMiLAogICAgICB2YWx1ZTogZnVuY3Rpb24gZmlsdGVyT3B0aW9ucygpIHsKICAgICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5zdGF0ZS52YWx1ZTsKICAgICAgICB2YXIgdGVybSA9IHRoaXMuZmlsdGVyUmVmLmN1cnJlbnQgPT09IG51bGwgPyAnJyA6IHRoaXMuZmlsdGVyUmVmLmN1cnJlbnQudmFsdWU7CiAgICAgICAgdGhpcy5wcm9wcy5maWx0ZXJPcHRpb25zKHRlcm0sIGZ1bmN0aW9uIChvcHRpb25zKSB7CiAgICAgICAgICBpZiAoIV90aGlzMi5jYW5jZWxsZWQpIHsKICAgICAgICAgICAgdmFyIHNlbGVjdGVkT3B0aW9uID0gb3B0aW9ucy5maWx0ZXIoZnVuY3Rpb24gKG9wdGlvbikgewogICAgICAgICAgICAgIHJldHVybiBvcHRpb24udmFsdWUgPT09IHZhbHVlOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdmFyIHRleHQgPSBzZWxlY3RlZE9wdGlvbi5sZW5ndGggPiAwID8gc2VsZWN0ZWRPcHRpb25bMF0ubGFiZWwgOiB1bmRlZmluZWQ7CgogICAgICAgICAgICBfdGhpczIuc2V0U3RhdGUoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBvcHRpb25zOiBvcHRpb25zLAogICAgICAgICAgICAgICAgdGV4dDogdGV4dCwKICAgICAgICAgICAgICAgIHRlcm06IHRlcm0KICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwgewogICAgICBrZXk6ICJyZW5kZXIiLAogICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICAgIHZhciBfdGhpcyRwcm9wcyA9IHRoaXMucHJvcHMsCiAgICAgICAgICAgIGZvcndhcmRlZFJlZiA9IF90aGlzJHByb3BzLmZvcndhcmRlZFJlZiwKICAgICAgICAgICAgb3RoZXJzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF90aGlzJHByb3BzLCBbImZvcndhcmRlZFJlZiJdKTsKCiAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ29tcG9uZW50LCBfZXh0ZW5kcyh7CiAgICAgICAgICBmb3J3YXJkZWRSZWY6IGZvcndhcmRlZFJlZiwKICAgICAgICAgIHRleHQ6IHRoaXMuc3RhdGUudGV4dCwKICAgICAgICAgIHRlcm06IHRoaXMuc3RhdGUudGVybSwKICAgICAgICAgIG9wdGlvbnM6IHRoaXMuc3RhdGUub3B0aW9ucywKICAgICAgICAgIGZpbHRlclJlZjogdGhpcy5maWx0ZXJSZWYsCiAgICAgICAgICBvbktleVVwOiB0aGlzLmZpbHRlck9wdGlvbnMKICAgICAgICB9LCBvdGhlcnMsIHsKICAgICAgICAgIF9fc291cmNlOiB7CiAgICAgICAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgICAgICAgIGxpbmVOdW1iZXI6IDM3CiAgICAgICAgICB9LAogICAgICAgICAgX19zZWxmOiB0aGlzCiAgICAgICAgfSkpOwogICAgICB9CiAgICB9LCB7CiAgICAgIGtleTogIl9fcmVhY3RzdGFuZGluX19yZWdlbmVyYXRlQnlFdmFsIiwKICAgICAgLy8gQHRzLWlnbm9yZQogICAgICB2YWx1ZTogZnVuY3Rpb24gX19yZWFjdHN0YW5kaW5fX3JlZ2VuZXJhdGVCeUV2YWwoa2V5LCBjb2RlKSB7CiAgICAgICAgLy8gQHRzLWlnbm9yZQogICAgICAgIHRoaXNba2V5XSA9IGV2YWwoY29kZSk7CiAgICAgIH0KICAgIH1dKTsKCiAgICByZXR1cm4gQXN5bmM7CiAgfShSZWFjdC5Db21wb25lbnQpOwoKICByZXR1cm4gUmVhY3QuZm9yd2FyZFJlZihmdW5jdGlvbiAocHJvcHMsIHJlZikgewogICAgdmFyIHZhbHVlID0gcHJvcHMudmFsdWUsCiAgICAgICAgb3RoZXJzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKHByb3BzLCBbInZhbHVlIl0pOwoKICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KEFzeW5jLCBfZXh0ZW5kcyh7CiAgICAgIHZhbHVlOiAiIi5jb25jYXQodmFsdWUpCiAgICB9LCBvdGhlcnMsIHsKICAgICAgZm9yd2FyZGVkUmVmOiByZWYsCiAgICAgIF9fc291cmNlOiB7CiAgICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgICBsaW5lTnVtYmVyOiA1MQogICAgICB9LAogICAgICBfX3NlbGY6IHRoaXMKICAgIH0pKTsKICB9KTsKfQoKdmFyIF9kZWZhdWx0ID0gd2l0aEFzeW5jOwpleHBvcnQgZGVmYXVsdCBfZGVmYXVsdDsKCmlmICh0eXBlb2Ygd2l0aEFzeW5jICE9PSAndW5kZWZpbmVkJyAmJiB3aXRoQXN5bmMgJiYgd2l0aEFzeW5jID09PSBPYmplY3Qod2l0aEFzeW5jKSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKHdpdGhBc3luYykpIHsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2l0aEFzeW5jLCAnX19maWxlbWV0YScsIHsKICAgIGVudW1lcmFibGU6IHRydWUsCiAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICB2YWx1ZTogewogICAgICBuYW1lOiAid2l0aEFzeW5jIiwKICAgICAgZmlsZW5hbWU6ICJzcmMvY29tcG9uZW50cy9mb3Jtcy9zZWxlY3RzL3dpdGgtYXN5bmMuanN4IgogICAgfQogIH0pOwp9Cgo7CgooZnVuY3Rpb24gKCkgewogIHZhciByZWFjdEhvdExvYWRlciA9ICh0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwgOiByZXF1aXJlKCdyZWFjdC1ob3QtbG9hZGVyJykpLmRlZmF1bHQ7CgogIGlmICghcmVhY3RIb3RMb2FkZXIpIHsKICAgIHJldHVybjsKICB9CgogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKHdpdGhBc3luYywgIndpdGhBc3luYyIsICIvc2l0ZS9zcmMvY29tcG9uZW50cy9mb3Jtcy9zZWxlY3RzL3dpdGgtYXN5bmMuanN4Iik7CiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIoX2RlZmF1bHQsICJkZWZhdWx0IiwgIi9zaXRlL3NyYy9jb21wb25lbnRzL2Zvcm1zL3NlbGVjdHMvd2l0aC1hc3luYy5qc3giKTsKfSkoKTsKCjsKCihmdW5jdGlvbiAoKSB7CiAgdmFyIGxlYXZlTW9kdWxlID0gKHR5cGVvZiByZWFjdEhvdExvYWRlckdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyByZWFjdEhvdExvYWRlckdsb2JhbCA6IHJlcXVpcmUoJ3JlYWN0LWhvdC1sb2FkZXInKSkubGVhdmVNb2R1bGU7CiAgbGVhdmVNb2R1bGUgJiYgbGVhdmVNb2R1bGUobW9kdWxlKTsKfSkoKTs="},{"version":3,"sources":["/site/src/components/forms/selects/with-async.jsx"],"names":["React","withAsync","Component","Async","props","state","value","text","options","term","filterOptions","bind","filterRef","createRef","current","cancelled","selectedOption","filter","option","length","label","undefined","setState","forwardedRef","others","forwardRef","ref"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;;AAEA,SAASC,SAAT,CAAmBC,SAAnB,EAA8B;AAAA,MACtBC,KADsB;AAAA;AAAA;AAAA;;AAE1B,mBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,iFAAMA,KAAN;AAEA,YAAKC,KAAL,GAAa;AACXC,QAAAA,KAAK,EAAEF,KAAK,CAACE,KADF;AAEXC,QAAAA,IAAI,EAAE,EAFK;AAGXC,QAAAA,OAAO,EAAE,EAHE;AAIXC,QAAAA,IAAI,EAAE;AAJK,OAAb;AAOA,YAAKC,aAAL,GAAqB,MAAKA,aAAL,CAAmBC,IAAnB,+BAArB;AACA,YAAKC,SAAL,GAAiBZ,KAAK,CAACa,SAAN,EAAjB;;AAEA,YAAKH,aAAL;;AAbiB;AAclB;;AAhByB;AAAA;AAAA,sCAkBV;AAAA;;AACd,YAAMJ,KAAK,GAAG,KAAKD,KAAL,CAAWC,KAAzB;AACA,YAAMG,IAAI,GAAG,KAAKG,SAAL,CAAeE,OAAf,KAA2B,IAA3B,GAAkC,EAAlC,GAAuC,KAAKF,SAAL,CAAeE,OAAf,CAAuBR,KAA3E;AACA,aAAKF,KAAL,CAAWM,aAAX,CAAyBD,IAAzB,EAA+B,UAAAD,OAAO,EAAI;AACxC,cAAI,CAAC,MAAI,CAACO,SAAV,EAAqB;AACnB,gBAAMC,cAAc,GAAGR,OAAO,CAACS,MAAR,CAAe,UAAAC,MAAM,EAAI;AAC9C,qBAAOA,MAAM,CAACZ,KAAP,KAAiBA,KAAxB;AACD,aAFsB,CAAvB;AAGA,gBAAMC,IAAI,GAAGS,cAAc,CAACG,MAAf,GAAwB,CAAxB,GAA4BH,cAAc,CAAC,CAAD,CAAd,CAAkBI,KAA9C,GAAsDC,SAAnE;;AACA,YAAA,MAAI,CAACC,QAAL,CAAc;AAAA,qBAAO;AAAEd,gBAAAA,OAAO,EAAPA,OAAF;AAAWD,gBAAAA,IAAI,EAAJA,IAAX;AAAiBE,gBAAAA,IAAI,EAAJA;AAAjB,eAAP;AAAA,aAAd;AACD;AACF,SARD;AASD;AA9ByB;AAAA;AAAA,+BAgCjB;AAAA,0BAC6B,KAAKL,KADlC;AAAA,YACCmB,YADD,eACCA,YADD;AAAA,YACkBC,MADlB;;AAEP,eAAO,oBAAC,SAAD;AACL,UAAA,YAAY,EAAED,YADT;AAEL,UAAA,IAAI,EAAE,KAAKlB,KAAL,CAAWE,IAFZ;AAGL,UAAA,IAAI,EAAE,KAAKF,KAAL,CAAWI,IAHZ;AAIL,UAAA,OAAO,EAAE,KAAKJ,KAAL,CAAWG,OAJf;AAKL,UAAA,SAAS,EAAE,KAAKI,SALX;AAML,UAAA,OAAO,EAAE,KAAKF;AANT,WAODc,MAPC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAP;AASD;AA3CyB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA,IACRxB,KAAK,CAACE,SADE;;AA8C5B,SAAOF,KAAK,CAACyB,UAAN,CAAiB,UAACrB,KAAD,EAAQsB,GAAR,EAAgB;AAAA,QAC9BpB,KAD8B,GACTF,KADS,CAC9BE,KAD8B;AAAA,QACpBkB,MADoB,4BACTpB,KADS;;AAEtC,WAAO,oBAAC,KAAD;AAAO,MAAA,KAAK,YAAKE,KAAL;AAAZ,OAA8BkB,MAA9B;AAAsC,MAAA,YAAY,EAAEE,GAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAP;AACD,GAHM,CAAP;AAID;;eAEczB,S;AAAf;;;;;;;;;;;;;;;;;;;;;;0BApDSA,S","sourcesContent":["import React from 'react'\n\nfunction withAsync(Component) {\n  class Async extends React.Component {\n    constructor(props) {\n      super(props)\n\n      this.state = {\n        value: props.value,\n        text: '',\n        options: [],\n        term: '',\n      }\n\n      this.filterOptions = this.filterOptions.bind(this)\n      this.filterRef = React.createRef()\n\n      this.filterOptions()\n    }\n\n    filterOptions() {\n      const value = this.state.value\n      const term = this.filterRef.current === null ? '' : this.filterRef.current.value\n      this.props.filterOptions(term, options => {\n        if (!this.cancelled) {\n          const selectedOption = options.filter(option => {\n            return option.value === value\n          })\n          const text = selectedOption.length > 0 ? selectedOption[0].label : undefined\n          this.setState(() => ({ options, text, term }))\n        }\n      })\n    }\n\n    render() {\n      const { forwardedRef, ...others } = this.props\n      return <Component\n        forwardedRef={forwardedRef}\n        text={this.state.text}\n        term={this.state.term}\n        options={this.state.options}\n        filterRef={this.filterRef}\n        onKeyUp={this.filterOptions}\n        {...others}\n      />\n    }\n  }\n\n  return React.forwardRef((props, ref) => {\n    const { value, ...others } = props\n    return <Async value={`${value}`} {...others} forwardedRef={ref} />\n  })\n}\n\nexport default withAsync\n"]}]}